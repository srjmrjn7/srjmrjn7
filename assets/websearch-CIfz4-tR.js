import{r as a,j as e}from"./index-CVcNbIs1.js";import{a as B}from"./index-ngrFHoWO.js";const Z=()=>{const[i,f]=a.useState(""),[d,g]=a.useState([]),[n,S]=a.useState(!1),[v,N]=a.useState(null),[b,y]=a.useState(!1),[R,P]=a.useState(0),[w,k]=a.useState(0),[E,_]=a.useState(1),[o,L]=a.useState("web"),[T,C]=a.useState([]),[A,m]=a.useState(!1),[l,F]=a.useState({date:"any",language:"en"}),D="AIzaSyByeX4QKwEHOqJO_eZdpogiubmb6t6vIM4",G="42f584782842d49a9",$=10,M=(s,t)=>{let r;return function(...h){const c=()=>{clearTimeout(r),s(...h)};clearTimeout(r),r=setTimeout(c,t)}},W=a.useCallback(M(async s=>{if(s.length<2){C([]);return}try{const t=[`${s} tutorial`,`${s} examples`,`how to use ${s}`,`${s} documentation`];C(t)}catch(t){console.error("Error fetching suggestions:",t)}},300),[]),H=s=>{const t=s.target.value;f(t),W(t),m(!0)},x=async(s=1,t=!1)=>{var r,j,h;if(i.trim()){S(!0),N(null),_(s);try{const c=Date.now(),U=(s-1)*$+1;let u=`https://www.googleapis.com/customsearch/v1?key=${D}&cx=${G}&q=${encodeURIComponent(i)}&start=${U}&num=${$}`;o==="image"&&(u+="&searchType=image"),l.date!=="any"&&(u+=`&dateRestrict=${l.date}`),l.language!=="en"&&(u+=`&lr=lang_${l.language}`);const p=await B.get(u),q=Date.now();P(q-c),k(parseInt(p.data.searchInformation.totalResults)||0),g(t?z=>[...z,...p.data.items]:p.data.items||[]),y(!0)}catch(c){console.error("Search error:",c),N(((h=(j=(r=c.response)==null?void 0:r.data)==null?void 0:j.error)==null?void 0:h.message)||"An error occurred during search")}finally{S(!1),m(!1)}}},J=s=>{s.preventDefault(),x(1,!1)},K=()=>{x(E+1,!0)},O=s=>{f(s),m(!1),x(1,!1)},Q=()=>{L(s=>s==="web"?"image":"web"),g([]),k(0),y(!1)},I=(s,t)=>{F(r=>({...r,[s]:t}))};return e.jsxs("div",{className:"web-search container",children:[e.jsx("h1",{className:"content-title",children:"Web Search"}),e.jsxs("div",{className:"search-container",children:[e.jsxs("form",{onSubmit:J,className:"search-form",children:[e.jsxs("div",{className:"search-input-container",children:[e.jsx("input",{type:"text",value:i,onChange:H,placeholder:"Enter your search query...",className:"search-input","aria-label":"Search query"}),e.jsx("button",{type:"submit",className:"search-button",disabled:n,children:n?"Searching...":"Search"})]}),A&&T.length>0&&e.jsx("ul",{className:"suggestions-list",children:T.map((s,t)=>e.jsx("li",{onClick:()=>O(s),className:"suggestion-item",children:s},t))})]}),e.jsxs("div",{className:"controls-row",children:[e.jsx("div",{className:"search-type-toggle",children:e.jsx("button",{onClick:Q,className:`type-toggle ${o}`,children:o==="web"?"Web Search":"Image Search"})}),e.jsxs("div",{className:"filter-controls",children:[e.jsxs("select",{value:l.date,onChange:s=>I("date",s.target.value),className:"filter-select",children:[e.jsx("option",{value:"any",children:"Any time"}),e.jsx("option",{value:"d1",children:"Past 24 hours"}),e.jsx("option",{value:"w1",children:"Past week"}),e.jsx("option",{value:"m1",children:"Past month"}),e.jsx("option",{value:"y1",children:"Past year"})]}),e.jsxs("select",{value:l.language,onChange:s=>I("language",s.target.value),className:"filter-select",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"ja",children:"Japanese"})]})]})]})]}),v&&e.jsx("div",{className:"error-message",children:e.jsxs("p",{children:["Error: ",v]})}),b&&!n&&e.jsx("div",{className:"search-meta",children:e.jsxs("p",{children:["Found ",w.toLocaleString()," results in ",R,"ms"]})}),e.jsxs("div",{className:"search-results",children:[n&&E===1&&e.jsxs("div",{className:"loading-indicator",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Searching..."})]}),!n&&d.length===0&&b&&e.jsxs("div",{className:"no-results",children:[e.jsxs("h3",{children:['No results found for "',i,'"']}),e.jsx("p",{children:"Try different keywords or check your filters"})]}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`results-grid ${o}`,children:d.map((s,t)=>{var r;return e.jsx("div",{className:"result-item",children:o==="image"?e.jsxs("div",{className:"image-result",children:[e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:s.link,alt:s.title})}),e.jsxs("div",{className:"image-details",children:[e.jsx("a",{href:(r=s.image)==null?void 0:r.contextLink,target:"_blank",rel:"noopener noreferrer",children:e.jsx("h3",{children:s.title})}),e.jsx("p",{children:s.snippet})]})]}):e.jsxs("div",{className:"web-result",children:[e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("h3",{children:s.title})}),e.jsx("cite",{children:s.displayLink}),e.jsx("p",{children:s.snippet})]})},t)})}),d.length<w&&e.jsx("div",{className:"load-more-container",children:e.jsx("button",{onClick:K,disabled:n,className:"load-more-btn btn",children:n?"Loading...":"Load More Results"})})]})]})]})};export{Z as default};
