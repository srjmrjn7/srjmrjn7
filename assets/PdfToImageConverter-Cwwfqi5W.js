import{r,j as e}from"./index-CVcNbIs1.js";import{a as w}from"./pdf-2vJvRhdA.js";import{F as O}from"./FileSaver.min-CL8nKYbZ.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./___vite-browser-external_commonjs-proxy-CwTsVdoa.js";w.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const V=()=>{const[l,E]=r.useState(null),[D,S]=r.useState(""),[m,b]=r.useState([]),[g,h]=r.useState(!1),[P,o]=r.useState(""),[d,k]=r.useState("png"),[x,I]=r.useState(.95),[v,f]=r.useState(1.5),[p,L]=r.useState(1),[j,R]=r.useState(0),N=r.useRef(null);r.useEffect(()=>{const a=()=>{window.innerWidth<768?f(1):window.innerWidth<1024?f(1.2):f(1.5)};return window.addEventListener("resize",a),a(),()=>window.removeEventListener("resize",a)},[]);const B=async a=>{const s=a.target.files[0];if(s)if(s.type==="application/pdf"){E(s),S(s.name.replace(".pdf","")),o("");try{const t=await s.arrayBuffer(),n=await w.getDocument(t).promise;R(n.numPages),await C(n,1)}catch(t){o("Error loading PDF: "+t.message)}}else o("Please select a valid PDF file")},C=async(a,s)=>{try{const t=await a.getPage(s),n=t.getViewport({scale:v}),i=N.current,u=i.getContext("2d");i.height=n.height,i.width=n.width,await t.render({canvasContext:u,viewport:n}).promise,L(s)}catch(t){o("Error rendering page: "+t.message)}},$=async()=>{if(!(!l||!N.current)){h(!0),o("");try{const a=N.current,s=a.toDataURL(`image/${d}`,x);b(t=>[...t,{url:s,pageNumber:p,width:a.width,height:a.height}])}catch(a){o("Error converting page: "+a.message)}finally{h(!1)}}},A=async()=>{if(l){h(!0),o(""),b([]);try{const a=await l.arrayBuffer(),s=await w.getDocument(a).promise,t=[];for(let n=1;n<=s.numPages;n++){const i=await s.getPage(n),u=i.getViewport({scale:v}),c=document.createElement("canvas"),z=c.getContext("2d");c.height=u.height,c.width=u.width,await i.render({canvasContext:z,viewport:u}).promise;const G=c.toDataURL(`image/${d}`,x);t.push({url:G,pageNumber:n,width:c.width,height:c.height})}b(t)}catch(a){o("Error converting PDF: "+a.message)}finally{h(!1)}}},y=(a,s)=>{O.saveAs(a,`${D}_page_${s}.${d}`)},U=()=>{m.forEach(a=>{y(a.url,a.pageNumber)})},F=async a=>{if(!l||j===0)return;const s=p+a;if(!(s<1||s>j))try{const t=await l.arrayBuffer(),n=await w.getDocument(t).promise;await C(n,s)}catch(t){o("Error navigating pages: "+t.message)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"pdf-converter-app container",children:[e.jsx("h1",{className:"content-title",children:"PDF to Image Converter"}),e.jsxs("main",{className:"app-main",children:[e.jsxs("section",{className:"upload-section",children:[e.jsxs("div",{className:"file-input-container",children:[e.jsxs("label",{htmlFor:"pdf-upload",className:"file-input-label",children:[e.jsx("span",{className:"file-input-button",children:"Choose PDF File"}),e.jsx("span",{className:"file-input-name",children:l?l.name:"No file selected"})]}),e.jsx("input",{id:"pdf-upload",type:"file",accept:"application/pdf",onChange:B,className:"file-input"})]}),l&&e.jsxs("div",{className:"page-navigation",children:[e.jsx("button",{onClick:()=>F(-1),disabled:p<=1,className:"nav-button",children:"Previous"}),e.jsxs("span",{className:"page-counter",children:["Page ",p," of ",j]}),e.jsx("button",{onClick:()=>F(1),disabled:p>=j,className:"nav-button",children:"Next"})]})]}),e.jsxs("div",{className:"converter-container",children:[e.jsxs("section",{className:"preview-section",children:[e.jsx("h2",{children:"PDF Preview"}),e.jsxs("div",{className:"canvas-container",children:[e.jsx("canvas",{ref:N,className:"pdf-canvas"}),!l&&e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"Upload a PDF file to see preview"})})]})]}),e.jsxs("section",{className:"controls-section",children:[e.jsx("h2",{children:"Conversion Options"}),e.jsx("div",{className:"control-group",children:e.jsxs("label",{className:"control-label",children:["Output Format:",e.jsxs("select",{value:d,onChange:a=>k(a.target.value),className:"control-select",children:[e.jsx("option",{value:"png",children:"PNG (Lossless)"}),e.jsx("option",{value:"jpeg",children:"JPEG (Compressed)"})]})]})}),d==="jpeg"&&e.jsx("div",{className:"control-group",children:e.jsxs("label",{className:"control-label",children:["JPEG Quality (0-1):",e.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.05",value:x,onChange:a=>I(parseFloat(a.target.value)),className:"control-range"}),e.jsx("span",{className:"range-value",children:x.toFixed(2)})]})}),e.jsx("div",{className:"control-group",children:e.jsxs("label",{className:"control-label",children:["Render Scale:",e.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:v,onChange:a=>f(parseFloat(a.target.value)),className:"control-range"}),e.jsxs("span",{className:"range-value",children:[v.toFixed(1),"x"]})]})}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:$,disabled:!l||g,className:"action-button convert-button",children:g?"Converting...":"Convert Current Page"}),e.jsx("button",{onClick:A,disabled:!l||g,className:"action-button convert-all-button",children:g?"Converting...":"Convert All Pages"})]})]})]}),P&&e.jsx("div",{className:"error-message",children:e.jsx("p",{children:P})}),m.length>0&&e.jsxs("section",{className:"results-section",children:[e.jsxs("div",{className:"results-header",children:[e.jsxs("h2",{children:["Converted Images (",m.length," pages)"]}),e.jsx("button",{onClick:U,className:"action-button download-all-button",children:"Download All"})]}),e.jsx("div",{className:"images-grid",children:m.map(a=>e.jsxs("div",{className:"image-card",children:[e.jsx("div",{className:"image-container",children:e.jsx("img",{src:a.url,alt:`Page ${a.pageNumber}`,loading:"lazy"})}),e.jsxs("div",{className:"image-meta",children:[e.jsxs("span",{children:["Page ",a.pageNumber]}),e.jsxs("span",{children:[a.width," Ã— ",a.height," px"]})]}),e.jsx("button",{onClick:()=>y(a.url,a.pageNumber),className:"download-button",children:"Download"})]},a.pageNumber))})]})]})]})})};export{V as default};
