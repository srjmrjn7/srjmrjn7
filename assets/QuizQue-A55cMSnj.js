import{d as D,a as G,b as K,r as s,j as e}from"./index-CVcNbIs1.js";import{a as I}from"./index-ngrFHoWO.js";/* empty css             */function O(){var Q;const{categoryId:l}=D(),k=G(),z=K(),h=((Q=k.state)==null?void 0:Q.difficulty)||"medium",f=s.useRef(0),[n,L]=s.useState([]),[r,A]=s.useState(0),[x,T]=s.useState(0),[u,g]=s.useState(null),[i,p]=s.useState(!1),[E,j]=s.useState(!0),[N,$]=s.useState(null),[a,w]=s.useState(15),[S,v]=s.useState(!0),[M,R]=s.useState("");s.useEffect(()=>{const t=Date.now();if(t-f.current<3e3)return;f.current=t,(async()=>{try{const m=(await I.get("https://opentdb.com/api_category.php")).data.trivia_categories.find(o=>o.id.toString()===l);R((m==null?void 0:m.name)||"General Knowledge");const C=await I.get(`https://opentdb.com/api.php?amount=10&category=${l}&difficulty=${h}&type=multiple`);if(C.data.results.length===0)throw new Error("No questions found for this category and difficulty.");const F=C.data.results.map(o=>({...o,answers:H([...o.incorrect_answers,o.correct_answer])}));L(F),j(!1)}catch(q){$(q.message),j(!1)}})()},[l,h]),s.useEffect(()=>{if(n.length>0&&S){const t=a>0&&setInterval(()=>{w(a-1)},1e3);return a===0&&y(),()=>clearInterval(t)}},[a,n,S]);const H=t=>[...t].sort(()=>Math.random()-.5),B=t=>{i||(g(t),p(!0),v(!1),t===n[r].correct_answer&&T(x+1))},y=()=>{r<n.length-1&&(A(r+1),g(null),p(!1),w(15),v(!0))},d=()=>{z("/quiz")};if(E)return e.jsx("div",{className:"container loading",children:"Loading questions..."});if(N)return e.jsxs("div",{className:"quiz-container error container",children:[e.jsx("p",{children:N}),e.jsx("button",{className:"next-button",onClick:d,children:"Back to Categories"})]});if(n.length===0)return e.jsxs("div",{className:"quiz-container no-questions container",children:[e.jsx("p",{children:"No questions available for this category."}),e.jsx("button",{className:"next-button",onClick:d,children:"Back to Categories"})]});const c=n[r],b=r===n.length-1;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"quiz-container container",children:[e.jsx("h1",{className:"content-title",children:M}),e.jsx("div",{className:"quiz-header",children:e.jsxs("div",{className:"quiz-info",children:[e.jsxs("span",{children:["Question ",r+1,"/",n.length]}),e.jsxs("span",{children:["Score: ",x]}),e.jsxs("span",{className:`timer ${a<=5?"warning":""}`,children:["Time: ",a,"s"]})]})}),e.jsxs("div",{className:"question-container",children:[e.jsx("h3",{dangerouslySetInnerHTML:{__html:c.question}}),e.jsx("div",{className:"answers-grid",children:c.answers.map((t,_)=>e.jsx("button",{onClick:()=>B(t),className:`answer-button 
                ${u===t?"selected":""}
                ${i&&t===c.correct_answer?"correct":""}
                ${i&&u===t&&t!==c.correct_answer?"incorrect":""}
              `,dangerouslySetInnerHTML:{__html:t}},_))})]}),i&&e.jsxs("div",{className:"feedback",children:[u===c.correct_answer?e.jsx("p",{className:"correct-feedback",children:"Correct! Well done!"}):e.jsxs("p",{className:"incorrect-feedback",children:["Incorrect. The correct answer is: ",e.jsx("span",{dangerouslySetInnerHTML:{__html:c.correct_answer}})]}),e.jsx("button",{onClick:b?d:y,className:"btn",children:b?"Finish Quiz":"Next Question"})]})]})})}export{O as default};
