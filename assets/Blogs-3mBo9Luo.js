import{r as o,j as e,L as R,k as M}from"./index-CVcNbIs1.js";import{z as b}from"./index-2roNfZMn.js";import{a as w}from"./index-ngrFHoWO.js";import{u as C}from"./globalStore-ByoUXurI.js";import{S as L}from"./search-I6-gGki7.js";import"./createLucideIcon-Ctnp8qhN.js";const $=({apiUrl:p,title:h,postsPerPage:m=6,loadMore:u=!1,initialPage:v=1,search:c})=>{const[j,d]=o.useState([]),[t,P]=o.useState(1),[r,k]=o.useState(!1),[x,N]=o.useState(!1),{windowWidth:y}=C();o.useEffect(()=>{(async()=>{var i,a;N(!0);try{const l={page:t,limit:m,s:typeof c=="string"?c:""},n=await w.get(p,{params:l}).then(S=>S.data);d(n.data),k(parseInt((n.count-1)/n.limit)+1)}catch(l){w.isAxiosError(l)?b.error(((a=(i=l.response)==null?void 0:i.data)==null?void 0:a.message)||"Failed to load posts",{position:"top-right"}):b.error("An unexpected error occurred",{position:"top-right"})}finally{N(!1)}})()},[t,c]);const f=s=>{s>=1&&s<=r&&P(s)},B=()=>{const s=[];if(r<=5)for(let a=1;a<=r;a++)s.push(a);else{const a=Math.max(1,t-2),l=Math.min(r,t+2);a>1&&s.push(1),a>2&&s.push("...");for(let n=a;n<=l;n++)s.push(n);l<r-1&&s.push("..."),l<r&&s.push(r)}return s},g=y<992?"14":"15";return e.jsx("div",{className:"articles-container",children:e.jsxs("div",{className:"blog-articles",children:[h&&e.jsx("h2",{className:"blog-title",children:h}),x?e.jsx(e.Fragment,{children:e.jsx("div",{className:"articles-grid",children:[...Array(m)].map((s,i)=>e.jsxs("div",{className:"article-skeleton",children:[e.jsx("div",{className:"skeleton-image"}),e.jsxs("div",{className:"skeleton-content",children:[e.jsx("div",{className:"skeleton-line",style:{width:"90%",height:"18px",marginBottom:"8px",borderRadius:"4px"}}),e.jsx("div",{className:"skeleton-line",style:{width:"70%",height:"18px",marginBottom:"14px",borderRadius:"4px"}}),e.jsx("div",{className:"skeleton-line",style:{width:"95%",height:`${g}px`,marginBottom:"8px",borderRadius:"4px"}}),e.jsx("div",{className:"skeleton-line",style:{width:"85%",height:`${g}px`,marginBottom:"8px",borderRadius:"4px"}}),e.jsx("div",{className:"skeleton-line",style:{width:"70%",height:`${g}px`,marginBottom:"8px",borderRadius:"4px"}}),e.jsx("div",{className:"skeleton-line",style:{width:"90%",height:`${g}px`,marginBottom:"8px",borderRadius:"4px"}})]})]},i))})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"articles-grid",children:j.map((s,i)=>{var a;return j.length,i+1,e.jsxs("div",{className:"article",children:[e.jsx("img",{src:s.featured_image,alt:s.title,className:"article-image"}),e.jsx("h3",{className:"article-title",children:e.jsx(R,{to:`/blog/${s.slug}`,children:s.title})}),e.jsx("p",{className:"article-excerpt",children:s.excerpt})]},((a=s.title)==null?void 0:a.replace(" ","-"))+Math.floor(Math.random()*1e3)+s.id)})})}),r>1&&e.jsxs("nav",{className:"pagination","aria-label":"Blog pagination",children:[e.jsx("button",{onClick:()=>f(t-1),disabled:t===1||x,"aria-label":"Previous page",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",className:"bi bi-chevron-left",viewBox:"0 0 16 16",children:e.jsx("path",{fillRule:"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"})})}),B().map((s,i)=>s==="..."?e.jsx("span",{className:"ellipsis",children:"..."},i):e.jsx("button",{onClick:()=>f(s),disabled:x,className:t===s?"active":"","aria-current":t===s?"page":void 0,children:s},i)),e.jsx("button",{onClick:()=>f(t+1),disabled:t===r||x,"aria-label":"Next page",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",className:"bi bi-chevron-right",viewBox:"0 0 16 16",children:e.jsx("path",{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"})})})]})]})})},V=()=>{const[p,h]=o.useState(""),[m]=M(),[u,v]=o.useState(m.get("s")||""),[c,j]=o.useState(!1);return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"container",children:[e.jsx("h1",{className:"content-title",children:"Blogs"}),e.jsx("div",{className:"pattern search-wrap",children:e.jsx("form",{className:"search-form",onSubmit:d=>{d.preventDefault(),h(u),console.log("here")},children:e.jsxs("div",{className:"form-group",children:[e.jsx(L,{className:"icon",size:"16"}),e.jsx("input",{className:"search-text",type:"text",placeholder:"Type a keyword and hit enter",value:u,onChange:d=>v(d.target.value)})]})})}),!c&&e.jsx($,{apiUrl:"https://api.maharjan-suraj.com.np/api/tutorials",postsPerPage:9,search:p,loadMore:!0})]})})};export{V as default};
